{"ast":null,"code":"var _jsxFileName = \"/Users/kshama/Downloads/web10/weather_app/src/components/Weather.js\";\nimport React, { Component } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Weather extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getWeatherData = url => {\n      axios.get(url).then(res => {\n        var _res$data, _res$data2;\n\n        const weatherData = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.list;\n        localStorage.setItem(\"location\", JSON.stringify(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.city));\n        localStorage.setItem(\"city\", this.state.city);\n        this.setState({\n          weatherData,\n          city: this.state.city\n        });\n      }).catch(err => {\n        alert(\"Please enter correct city\");\n        this.setState({\n          weatherData: {}\n        });\n      });\n    };\n\n    this.searchCity = event => {\n      event.preventDefault();\n      console.log(process.env);\n      const appid = process.env.REACT_APP_APPID2;\n      const units = process.env.REACT_APP_UNITS;\n      const url = `http://api.openweathermap.org/data/2.5/forecast?q=${this.state.city}&appid=${appid}&units=${units}`;\n      console.log(url);\n      this.getWeatherData(url);\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      this.setState({\n        city: target.value\n      });\n    };\n\n    this.onClickHandler = obj => {\n      var _this$state$weatherDa;\n\n      let newDate = new Date();\n      const weekday = obj.dt * 1000;\n      newDate.setTime(weekday);\n      const date = obj.dt_txt.split(\" \")[0];\n      const data = (_this$state$weatherDa = this.state.weatherData) === null || _this$state$weatherDa === void 0 ? void 0 : _this$state$weatherDa.filter(data => data.dt_txt.includes(date));\n      localStorage.setItem(\"dailyWeather\", JSON.stringify(data));\n      localStorage.setItem(\"currentDailyWeather\", JSON.stringify(obj));\n      this.props.history.push(`dailyWeather/${moment(date).format(\"dddd\")}`);\n    };\n\n    this.state = {\n      city: localStorage.getItem(\"city\") || \"\",\n      zipcode: \"02215\",\n      country: \"USA\",\n      latitude: \"\",\n      longitude: \"\",\n      weatherData: {},\n      location: {}\n    };\n  }\n\n  componentDidMount() {\n    this.state.city && this.getWeatherData();\n  }\n\n  render() {\n    let isWeather = false;\n    const card = [];\n\n    if (this.state.weatherData.length) {\n      const data = [];\n      const map = new Map();\n      let cnt = 0;\n\n      for (const item of this.state.weatherData) {\n        if (!map.has(item.dt_txt.split(\" \")[0].split(\"-\")[2]) && cnt <= 4) {\n          map.set(item.dt_txt.split(\" \")[0].split(\"-\")[2], true);\n          data.push(item);\n          cnt++;\n        }\n      }\n\n      console.log(data);\n      localStorage.setItem(\"fullData\", JSON.stringify(data));\n      isWeather = true;\n      const abcData = data.map((obj, i) => {\n        let newDate = new Date(obj.dt_txt);\n        const imgURL = `owf owf-${obj.weather[0].id} owf-5x`;\n        card.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"weather card\",\n          onClick: () => {\n            this.onClickHandler(obj);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"card-title\",\n            children: moment(newDate).format(\"dddd\")\n          }, `h3_${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted\",\n            children: moment(newDate).format(\"MMMM Do\")\n          }, `p_${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: imgURL\n            }, `i_${i}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: \"auto 5px\"\n              },\n              children: [Math.round(obj.main.temp), /*#__PURE__*/_jsxDEV(\"sup\", {\n                children: \"\\xB0C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)]\n            }, `h2_${i}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: \"auto 5px\"\n              },\n              children: [Math.round(obj.main.temp_max), /*#__PURE__*/_jsxDEV(\"sup\", {\n                children: \"\\xB0C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this)]\n            }, `h4_${i}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: \"auto 5px\",\n                color: \"#bababa\"\n              },\n              children: [Math.round(obj.main.temp_min), /*#__PURE__*/_jsxDEV(\"sup\", {\n                children: \"\\xB0C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)]\n            }, `h5_${i}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: obj.weather[0].description\n            }, `pdesc_${i}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, `card_${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, `main_${i}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this));\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: this.state.weatherData.length ? \"flex\" : \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leftbg\",\n        style: {\n          width: this.state.weatherData.length ? \"0%\" : \"100%\",\n          display: this.state.weatherData.length ? \"none\" : \"flex\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"SearchBarChilds\",\n          children: [!this.state.weatherData.length ? /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"header-title\",\n            children: \"Weather Forecast App\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-white\",\n            children: \"Search weather on your city\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.searchCity,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              defaultValue: this.state.city,\n              value: this.state.city,\n              type: \"text\" // value={this.state.value}\n              ,\n              onChange: this.handleChange,\n              name: \"city\",\n              id: \"inputSearchCity\",\n              placeholder: \"Search City...\",\n              InputLabelProps: {\n                shrink: true\n              },\n              style: {\n                background: \"white\",\n                borderRadius: 8,\n                width: \"82%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"submitButton\",\n              type: \"submit\",\n              value: \"Submit\",\n              style: {\n                margin: \"10px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), this.state.weatherData.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightbg\",\n        style: {\n          width: this.state.weatherData.length ? \"100%\" : \"0%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"header-title\",\n          children: \"Weather Forecast App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\"\n          },\n          children: isWeather && card\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Weather;","map":{"version":3,"sources":["/Users/kshama/Downloads/web10/weather_app/src/components/Weather.js"],"names":["React","Component","TextField","axios","moment","Weather","constructor","props","getWeatherData","url","get","then","res","weatherData","data","list","localStorage","setItem","JSON","stringify","city","state","setState","catch","err","alert","searchCity","event","preventDefault","console","log","process","env","appid","REACT_APP_APPID2","units","REACT_APP_UNITS","handleChange","target","value","onClickHandler","obj","newDate","Date","weekday","dt","setTime","date","dt_txt","split","filter","includes","history","push","format","getItem","zipcode","country","latitude","longitude","location","componentDidMount","render","isWeather","card","length","map","Map","cnt","item","has","set","abcData","i","imgURL","weather","id","display","justifyContent","margin","Math","round","main","temp","temp_max","color","temp_min","description","width","shrink","background","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nclass Weather extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      city: localStorage.getItem(\"city\") || \"\",\n      zipcode: \"02215\",\n      country: \"USA\",\n      latitude: \"\",\n      longitude: \"\",\n      weatherData: {},\n      location: {},\n    };\n  }\n  componentDidMount() {\n    this.state.city && this.getWeatherData();\n  }\n  getWeatherData = (url) => {\n    axios\n      .get(\n        url\n      )\n      .then((res) => {\n        const weatherData = res?.data?.list;\n        localStorage.setItem(\"location\", JSON.stringify(res?.data?.city));\n        localStorage.setItem(\"city\", this.state.city);\n        this.setState({ weatherData, city: this.state.city });\n      })\n      .catch((err) => {\n        alert(\"Please enter correct city\");\n        this.setState({ weatherData: {} });\n      });\n  };\n  searchCity = (event) => {\n    event.preventDefault();\n    console.log(process.env);\n    const appid = process.env.REACT_APP_APPID2;\n    const units = process.env.REACT_APP_UNITS;\n    const url = `http://api.openweathermap.org/data/2.5/forecast?q=${this.state.city}&appid=${appid}&units=${units}`;\n    console.log(url);\n    this.getWeatherData(url);\n  };\n  handleChange = ({ target }) => {\n      this.setState({\n        city: target.value,\n      });\n  };\n\n  onClickHandler = (obj) => {\n    let newDate = new Date();\n    const weekday = obj.dt * 1000;\n    newDate.setTime(weekday);\n    const date = obj.dt_txt.split(\" \")[0];\n    const data = this.state.weatherData?.filter((data) =>\n      data.dt_txt.includes(date)\n    );\n    localStorage.setItem(\"dailyWeather\", JSON.stringify(data));\n    localStorage.setItem(\"currentDailyWeather\", JSON.stringify(obj));\n    this.props.history.push(`dailyWeather/${moment(date).format(\"dddd\")}`);\n  };\n  render() {\n    let isWeather = false;\n    const card = [];\n    if (this.state.weatherData.length) {\n      const data = [];\n      const map = new Map();\n      let cnt = 0;\n      for (const item of this.state.weatherData) {\n        if (!map.has(item.dt_txt.split(\" \")[0].split(\"-\")[2]) && cnt<=4) {\n          map.set(item.dt_txt.split(\" \")[0].split(\"-\")[2], true);\n          data.push(item);\n          cnt++;\n        }\n      }\n      console.log(data);\n      localStorage.setItem(\"fullData\", JSON.stringify(data));\n      isWeather = true;\n      const abcData = data.map((obj, i) => {\n        let newDate = new Date(obj.dt_txt);\n        const imgURL = `owf owf-${obj.weather[0].id} owf-5x`;\n        card.push(\n          <div\n            className=\"weather card\"\n            key={`main_${i}`}\n            onClick={() => {\n              this.onClickHandler(obj);\n            }}\n          >\n            <h3 className=\"card-title\" key={`h3_${i}`}>\n              {moment(newDate).format(\"dddd\")}\n            </h3>\n            <p className=\"text-muted\" key={`p_${i}`}>\n              {moment(newDate).format(\"MMMM Do\")}\n            </p>\n            <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n              <i className={imgURL} key={`i_${i}`}></i>\n              <h2 key={`h2_${i}`} style={{ margin: \"auto 5px\" }}>\n                {Math.round(obj.main.temp)}\n                <sup>°C</sup>\n              </h2>\n            </div>\n            <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n              <h2 key={`h4_${i}`} style={{ margin: \"auto 5px\" }}>\n                {Math.round(obj.main.temp_max)}\n                <sup>°C</sup>\n              </h2>\n              <h2\n                key={`h5_${i}`}\n                style={{ margin: \"auto 5px\", color: \"#bababa\" }}\n              >\n                {Math.round(obj.main.temp_min)}\n                <sup>°C</sup>\n              </h2>\n            </div>\n            <div className=\"card-body\" key={`card_${i}`}>\n              <p className=\"card-text\" key={`pdesc_${i}`}>\n                {obj.weather[0].description}\n              </p>\n            </div>\n          </div>\n        );\n      });\n    }\n    return (\n      <div\n        style={{ display: this.state.weatherData.length ? \"flex\" : \"flex\" }}\n      >\n        <div\n          className=\"leftbg\"\n          style={{ width: this.state.weatherData.length ? \"0%\" : \"100%\" , display: this.state.weatherData.length ? \"none\" : \"flex\"}}\n        >\n          <div className=\"SearchBarChilds\">\n            {!this.state.weatherData.length ? (\n              <h1 className=\"header-title\">Weather Forecast App</h1>\n            ) : null}\n            <h2 className=\"text-white\">Search weather on your city</h2>\n            <form onSubmit={this.searchCity}>\n              <TextField\n                variant=\"outlined\"\n                defaultValue={this.state.city}\n                value={this.state.city}\n                type=\"text\"\n                // value={this.state.value}\n                onChange={this.handleChange}\n                name=\"city\"\n                id=\"inputSearchCity\"\n                placeholder=\"Search City...\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                style={{ background: \"white\", borderRadius: 8, width: \"82%\" }}\n              />\n              <input\n                className=\"submitButton\"\n                type=\"submit\"\n                value=\"Submit\"\n                style={{ margin: \"10px\" }}\n              />\n            </form>\n          </div>\n        </div>\n        {this.state.weatherData.length ? (\n          <div\n            className=\"rightbg\"\n            style={{ width: this.state.weatherData.length ? \"100%\" : \"0%\" }}\n          >\n            <h1 className=\"header-title\">Weather Forecast App</h1>\n            <div style={{ display: \"flex\" }}>{isWeather && card}</div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default Weather;\n"]},"metadata":{},"sourceType":"module"}